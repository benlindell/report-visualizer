!function t(e,r,s){function a(i,o){if(!r[i]){if(!e[i]){var p="function"==typeof require&&require;if(!o&&p)return p(i,!0);if(n)return n(i,!0);throw new Error("Cannot find module '"+i+"'")}var u=r[i]={exports:{}};e[i][0].call(u.exports,function(t){var r=e[i][1][t];return a(r?r:t)},u,u.exports,t,e,r,s)}return r[i].exports}for(var n="function"==typeof require&&require,i=0;i<s.length;i++)a(s[i]);return a}({1:[function(){},{}],2:[function(t,e){var r,s,a;r=t("react"),s=t("lodash"),a=r.DOM.rect,e.exports=r.createClass({displayName:"Bar",getDefaultProps:function(){return{width:0,height:0,availableHeight:0,offset:0,title:"",fill:"#ccc"}},render:function(){return a({width:this.props.width,height:this.props.height,x:s.isUndefined(this.props.x)?this.props.offset:this.props.x,y:s.isUndefined(this.props.y)?this.props.availableHeight-this.props.height:this.props.y,title:this.props.title,fill:this.props.fill},[])}})},{}],3:[function(t,e){var r,s;r=t("react"),s=r.DOM.svg,e.exports=r.createClass({displayName:"Chart",getDefaultProps:function(){return{width:0,height:0}},render:function(){return s({width:this.props.width,height:this.props.height,className:this.props.className},this.props.children)}})},{}],4:[function(t,e){e.exports={Stacked:t("./stacked"),VerticalBars:t("./verticalBars"),PunchChart:t("./punchchart")}},{"./punchchart":5,"./stacked":6,"./verticalBars":8}],5:[function(t,e){var r,s,a,n,i,o,p,u,c;o=t("lodash"),s=t("react"),c=s.DOM,i=c.g,u=c.text,n=c.circle,p=c.line,r=t("./chart"),a=t("./tooltip"),e.exports=s.createClass({displayName:"PunchChart",getDefaultProps:function(){return{width:200,height:300,padding:{t:0,r:0,b:40,l:40}}},render:function(){var t,e,s,c,h,l,d,f,y,g,v,m,k,b,w,x,N,C;return k=this.props.xValues||o(this.props.distribution).map(function(t){var e,r,s;return r=t[0],s=t[1],e=t[2],r}).unique().sortBy().value(),C=this.props.yValues||o(this.props.distribution).map(function(t){var e,r,s;return r=t[0],s=t[1],e=t[2],s}).unique().sortBy().value(),e=o.min(this.props.distribution,function(t){var e,r,s;return r=t[0],s=t[1],e=t[2],e})[2],t=o.max(this.props.distribution,function(t){var e,r,s;return r=t[0],s=t[1],e=t[2],e})[2],d=this.props.padding,h={height:this.props.height-d.t-d.b,width:this.props.width-d.l-d.r},c=Math.floor(h.height/C.length),f=Math.floor(h.width/k.length),l=Math.floor(.9*Math.max(0,Math.min(c,f)/2)),N=function(t){return d.t+c*t},m=function(t){return d.l+f*t},y=p({key:"xAxis",x1:0,x2:this.props.width,y1:h.height+d.t,y2:h.height+d.t,transform:"translate(0.5,0.5)"}),b=p({key:"yAxis",x1:d.l,x2:d.l,y1:0,y2:this.props.height,transform:"translate(0.5,0.5)"}),x=o.map(C,function(t,e){return p({key:e,x1:d.l-5,y1:N(e+1)-c/2,x2:d.l+5,y2:N(e+1)-c/2})}),w=o.map(C,function(t,e){return null==t&&(t=""),u({key:e,x:d.l-10,y:N(e+1)-c/2+5},t)}),v=o.map(k,function(t){return function(e,r){return p({key:r,x1:m(r)+f/2,y1:t.props.height-d.b-5,x2:m(r)+f/2,y2:t.props.height-d.b+5})}}(this)),g=o.map(k,function(t){return function(e,r){return null==e&&(e=""),u({key:r,x:m(r)+f/2,y:t.props.height-d.b+20},e.replace(/^(\d*) /,""))}}(this)),s=o.map(this.props.distribution,function(r,s){var o,p,u,h,d,y;return h=r[0],y=r[1],o=r[2],o>0?(p=Math.max(5,l*(o-e)/Math.max(1,t-e)),isNaN(p)&&(p=5),u=f/2+m(_.indexOf(k,h)),d=c/2+N(_.indexOf(C,y)),i({key:s,className:"dot"},[n({key:"dot",r:p,transform:"translate("+u+", "+d+")",title:""+o}),a({key:"tip",x:u,y:d-p,label:""+o})])):void 0}),r({width:this.props.width,height:this.props.height,className:"chart chart-punchchart"},[y,b,i({key:"labels-y",className:"labels-y"},w),i({key:"markers-y",className:"markers-y"},x),i({key:"labels-x",className:"labels-x"},g),i({key:"markers-x",className:"markers-x"},v),i({key:"values",className:"values"},s)])}})},{"./chart":3,"./tooltip":7}],6:[function(t,e){var r,s,a,n,i,o,p;i=t("lodash"),a=t("react"),p=a.DOM,n=p.g,o=p.text,s=t("../charts/chart"),r=t("../charts/bar"),e.exports=a.createClass({displayName:"StackedChart",getDefaultProps:function(){return{width:200,height:300,fills:["#042d42","#0b84c2","#075075","#57bef2","#326e8c"]}},render:function(){var t,e,a,p;return t=i(this.props.distribution).reduce(function(t,e){return t+e},0),a=function(t){return function(){var e;return e=0,function(){return e+=1,t.props.fills[e%t.props.fills.length]}}}(this)(),p=0,e=i(this.props.distribution).pairs().sortBy(function(t){var e,r;return r=t[0],e=t[1],-1*e}).map(function(e){return function(s,i){var u,c,h,l,d;return d=s[0],l=s[1],c=e.props.height*(l/t),h=o({key:"label",x:5,y:p+15},d),u=r({key:"bar",width:e.props.width,height:c,title:d,fill:a(),y:p},[]),p+=c,n({key:i},[u,h])}}(this)),s({width:this.props.width,height:this.props.height,className:"chart chart-stacked"},e)}})},{"../charts/bar":2,"../charts/chart":3}],7:[function(t,e){var r,s,a,n,i;r=t("react"),i=r.DOM,s=i.g,a=i.rect,n=i.text,e.exports=r.createClass({displayName:"Tooltip",getDefaultProps:function(){return{x:0,y:0,label:""}},render:function(){return s({className:"tooltip",transform:"translate("+this.props.x+","+this.props.y+")"},[a({key:"bg",className:"tooltip-bg",x:-13,y:-14,rx:5,ry:5,height:20,width:10+6*this.props.label.length+10}),n({key:"label",className:"tooltip-label",ref:"label",children:this.props.label})])}})},{}],8:[function(t,e){var r,s,a,n,i,o,p;i=t("lodash"),a=t("react"),p=a.DOM,n=p.div,o=p.p,s=t("../charts/chart"),r=t("../charts/bar"),e.exports=a.createClass({displayName:"VerticalBarChart",getDefaultProps:function(){return{width:200,height:300,lineHeight:5}},render:function(){var t,e;return e=_.max(this.props.distribution,_.identity),t=i(this.props.distribution).pairs().sortBy(function(t){var e,r;return r=t[0],e=t[1],-1*e}).map(function(t){return function(r,s){var a,i,p,u,c;return u=r[0],p=r[1],c=t.props.width*(p/e),i=o({key:"label",className:"chart-vertical-label"},""+u+" ("+p+")"),a=n({key:"bar",className:"chart-vertical-bar",style:{width:c,height:t.props.lineHeight}},[]),n({key:s,className:"chart-vertical-line"},[i,a])}}(this)),n({className:"chart chart-vertical-bars"},t)}})},{"../charts/bar":2,"../charts/chart":3}],9:[function(t,e){var r,s;try{s=JSON.parse(window.sessionStorage.snapshots),console.log("Got "+s.length+" snapshots from local storage.")}catch(a){r=a,s=[]}e.exports=window.data={hasData:!!s.length,snapshots:s,_save:function(){return window.sessionStorage.snapshots=JSON.stringify(this.snapshots)},_clear:function(){return delete window.sessionStorage.snapshots}}},{}],10:[function(t){/*!
 * # Reporter Visualizer
 *
 * @copyright 2014 Pascal Hertleif
 * @license MIT
 */
var e,r,s,a,n,i,o,p,u,c,h,l,d;e=t("react"),d=e.DOM,l=d.section,n=d.div,i=d.h1,o=d.h2,c=d.p,r=d.a,s=d.code,p=d.img,a=t("./data"),u=e.createClass({displayName:"Layout",getInitialState:function(){return{hasData:!!a.hasData}},gotData:function(){return this.replaceProps({snapshots:a.snapshots}),this.setState({hasData:!0})},clearCache:function(t){return t.preventDefault(),a._clear(),window.location.reload()},render:function(){return l({className:"main"},[t("./views/header")({key:"header"}),this.state.hasData?[l({key:"meta",className:"box meta"},[c({key:"meta-p"},[""+this.props.snapshots.length+" snapshots loaded. ",r({key:"clearCache",href:"#clear",onClick:this.clearCache},"Clear Cache")])]),t("./views/charts")({key:"charts",snapshots:this.props.snapshots})]:[t("./views/start")({key:"start",gotData:this.gotData})]])}}),(h=function(){return e.renderComponent(u({snapshots:a.snapshots}),document.getElementById("container"))})()},{"./data":9,"./views/charts":14,"./views/header":15,"./views/start":18}],11:[function(t,e,r){var r,s;s=t("lodash"),r=e.exports,r.getAnswersFromResponse=function(t){var e,r;return e=t.answeredOptions||t.tokens,e||(e=t.numericResponse||t.textResponse||(null!=(r=t.locationResponse)?r.text:void 0)),s.isArray(e)||(e=[e]),e},r.getAnswerCount=function(t,e){return null==e&&(e=_.identity),s(t).reduce(function(t,s){var a,n,i,o;for(o=r.getAnswersFromResponse(s),n=0,i=o.length;i>n;n++)a=o[n],e(a)&&(t[a]||(t[a]=0),t[a]+=1);return t},{})},r.getDistribution=function(t,e){return{aspect:e,distribution:r.getAnswerCount(s(t).where({questionPrompt:e}))}},r.connectionsDistribution=function(t,e){return{aspect:e,distribution:s(t).pluck("connection").map(function(t){return 0===t?"Cell":1===t?"WiFi":"Offline"}).reduce(function(t,e){return t[e]||(t[e]=0),t[e]+=1,t},{})}},r.aggregateWithIndex=function(t,e,r,a){return s(t).reject(function(t){return!r(t)}).groupBy(function(t){return JSON.stringify(e(t))}).pairs().map(function(t){var s,n,i;return i=t[0],n=t[1],s=e(n[0]),n=a(_.map(n,function(t){return r(t)})),_.flatten([s,n])}).value()},r.aggregatePunch=function(t,e,a,n){var i,o;return i=function(t){var e,r,s;return e=_.where(t.responses,{questionPrompt:a}),null!=e?null!=(r=e[0])?null!=(s=r.answeredOptions)?s[0]:void 0:void 0:void 0},o=function(t){return s(t).reduce(function(t,e){return n(e)?t+1:t},0)},r.aggregateWithIndex(t,e,i,o)}},{}],12:[function(t,e){var r,s,a,n,i,o;i=t("lodash"),r=t("q"),s=t("react"),n=s.DOM.input,a=t("../data"),o=function(t){var e,s;return e=r.defer(),s=new window.FileReader,s.onload=function(r){var s,a;try{return a=JSON.parse(r.target.result),e.resolve(a)}catch(n){return s=n,s.message="Error parsing "+t.name,e.reject(s)}},s.onerror=function(){return e.reject(new Error("Error reading file "+t.name))},s.onabort=function(){return e.reject(new Error("Aborted reading file "+t.name))},s.readAsText(t),e.promise},e.exports=s.createClass({displayName:"LoadFiles",loadFiles:function(t){var e;return t.preventDefault(),e=t.target.files,(null!=e?e.length:void 0)?r.all(i.map(e,o)).then(function(t){return function(e){var r,s;s=i(e).map(function(t){return t.snapshots}).flatten().value();try{return a.hasData=!0,a.snapshots=s,a._save(),t.props.gotData()}catch(n){return r=n,console.error(r.stack)}}}(this)).fail(function(t){return window.alert("Failed to load files."),console.error(t)}):console.log("No files")},render:function(){return n({key:1,type:"file",multiple:!0,onChange:this.loadFiles})}})},{"../data":9,q:"GOrh4h"}],13:[function(t,e){var r,s,a,n,i,o,p,u,c,h,l,d,f;u=t("lodash"),s=t("react"),f=s.DOM,i=f.div,o=f.h2,l=f.p,n=f.button,d=f.select,h=f.option,c=f.label,a=t("./specificCharts"),r=t("./overlay"),p=function(t){return/^Punch/.test(t)},e.exports=s.createClass({displayName:"ChartContainer",mixins:[s.addons.LinkedStateMixin],getDefaultProps:function(){return{width:260,extraClasses:"",overlay:!1}},getInitialState:function(){var t,e,r,s;return e=/^(Yes|No)$/.test(null!=(r=this.props.sample)?null!=(s=r.answeredOptions)?s[0]:void 0:void 0),t=this.props.chartType?this.props.chartType:e?"PunchImpetusWeekday":this.props.sample.answeredOptions?"Stacked":"VerticalBars",{chartType:t,punchChartAble:e}},handleChartTypeChange:function(){return this.setState({chartType:event.target.value})},toggleOverlay:function(){return this.setState({overlay:!this.state.overlay})},render:function(){var t,e,u;return t=a[this.state.chartType]||a.VerticalBars,e=_(a).keys().reject(function(t){return function(e){return p(e)&&!t.state.punchChartAble}}(this)).map(function(t){return h({key:t,value:t},t)}).value(),u=s.addons.classSet({"chart-container":!0,"double":p(this.state.chartType)}),i({className:u},[r({key:"over",active:this.state.overlay},[i({key:"main",className:"main"},[n({key:"settings",className:"toggle-settings",onClick:this.toggleOverlay},"Settings"),o({key:"heading"},this.props.aspect),i({key:"chart",className:"chart-box"},[t(this.props,[])])]),i({key:"overlay",className:"overlay"},[n({key:"settings",className:"toggle-settings",onClick:this.toggleOverlay},"Done"),o({key:"heading"},this.props.aspect),l({key:"settings-1"},[c({key:"label"},["Chart Type ",d({key:"select",valueLink:this.linkState("chartType")},e)])])])])])}})},{"./overlay":16,"./specificCharts":17}],14:[function(t,e){var r,s,a,n,i;n=t("lodash"),a=t("react"),i=a.DOM.section,s=t("../reporter/distributions"),r=t("./chartSwitch"),e.exports=a.createClass({displayName:"ChartsView",render:function(){var t,e,a;return a=n(this.props.snapshots).pluck("responses").flatten().value(),e=n(a).pluck("questionPrompt").unique().sort().value(),t=e.map(function(t){return function(e,s){var i;return i=n.find(a,{questionPrompt:e}),r({key:s,snapshots:t.props.snapshots,aspect:e,responses:a,sample:i})}}(this)),function(e){return function(){var a,n,i;return a="What's your internet connection?",n=s.connectionsDistribution(e.props.snapshots,a).distribution,i={key:t.length,aspect:a,distribution:n,chartType:"Stacked"},t.push(r(i,[]))}}(this)(),i({},t)}})},{"../reporter/distributions":11,"./chartSwitch":13}],15:[function(t,e){var r,s,a,n,i,o;r=t("react"),o=r.DOM,a=o.div,n=o.h1,s=o.a,i=o.img,e.exports=r.createClass({render:function(){return a({key:"top-bar",className:"top-bar"},[a({key:"r",className:"right"},[s({key:"flattr",className:"flattr",href:"http://flattr.com/thing/2729835/"},[i({key:"img",src:"http://api.flattr.com/button/flattr-badge-large.png"})]),s({key:"gh",className:"gh",href:"https://github.com/killercup/report-visualizer"},"Fork this on Github")]),n({key:"title"},"Report Visualizer")])}})},{}],16:[function(t,e){var r,s,a,n;r=t("react"),n=r.DOM,a=n.div,s=n.a,e.exports=r.createClass({displayName:"OverlayContainer",getDefaultProps:function(){return{active:!1}},render:function(){var t;return t=r.addons.classSet({"overlay-container":!0,active:this.props.active}),a({className:t},this.props.children)}})},{}],17:[function(t,e){var r,s,a,n,i;i=t("lodash"),a=t("react"),r=t("../charts"),s=t("../reporter/distributions"),n={},n.Stacked=a.createClass({displayName:"StackedReporterChart",render:function(){var t;return t=this.props.distribution?this.props:i.defaults(s.getDistribution(this.props.responses,this.props.aspect),this.props),r.Stacked(t,[])}}),n.VerticalBars=a.createClass({displayName:"VerticalBarsReporterChart",render:function(){var t;return t=this.props.distribution?this.props:i.defaults(s.getDistribution(this.props.responses,this.props.aspect),this.props),r.VerticalBars(t,[])}}),n.PunchImpetusWeekday=a.createClass({displayName:"PunchImpetusWeekdayReporterChart",getDefaultProps:function(){return{weekdays:["7 Sun","1 Mon","2 Tue","3 Wed","4 Thu","5 Fri","6 Sat"],impetues:["Tapped","Sleeping","Day","Dusk","Dawn"],criteria:"Yes",getIndex:function(){return function(t){var e;return e=new Date(t.date),[e.getDay(),t.reportImpetus]}}(this),entryToLabels:function(t){return function(e){var r,s,a;return s=e[0],a=e[1],r=e[2],[t.props.weekdays[s],t.props.impetues[a],r]}}(this)}},render:function(){var t,e,a,n;return a=this.props.getIndex,t=function(t){return function(e){return e===t.props.criteria}}(this),n=i.filter(this.props.snapshots,function(t){return t.reportImpetus&&i.isString(t.date)}),e=i(s.aggregatePunch(n,a,this.props.aspect,t)).map(this.props.entryToLabels).value(),r.PunchChart({aspect:this.props.aspect,distribution:e,width:560,padding:{l:60,b:30,r:0,t:0}})}}),n.PunchHourWeekday=a.createClass({displayName:"PunchHourWeekdayReporterChart",getDefaultProps:function(){var t,e;return{weekdays:["7 Sun","1 Mon","2 Tue","3 Wed","4 Thu","5 Fri","6 Sat"],criteria:"Yes",yValues:function(){for(e=[],t=0;23>=t;t++)e.push(t);return e}.apply(this),getIndex:function(t){var e;return e=new Date(t.date),[e.getDay(),e.getHours()]},entryToLabels:function(t){return function(e){var r,s,a;return s=e[0],a=e[1],r=e[2],[t.props.weekdays[s],a,r]}}(this)}},render:function(){var t,e,a,n;return a=this.props.getIndex,t=function(t){return function(e){return e===t.props.criteria}}(this),n=i.filter(this.props.snapshots,function(t){return i.isString(t.date)}),e=i(s.aggregatePunch(n,a,this.props.aspect,t)).map(this.props.entryToLabels).value(),r.PunchChart({aspect:this.props.aspect,yValues:this.props.yValues,distribution:e,width:560,padding:{l:60,b:30,r:0,t:0}})}}),e.exports=n},{"../charts":4,"../reporter/distributions":11}],18:[function(t,e){var r,s,a,n,i,o,p,u;s=t("react"),u=s.DOM,i=u.div,o=u.h2,p=u.p,a=u.a,n=u.code,r=t("../reporter/loadFiles"),e.exports=s.createClass({render:function(){return i({className:"box text-box load-files"},[o({key:"headline"},"Display your reports"),p({key:"info"},["This tool can display the data exported by ",a({key:"rep",href:"http://www.reporter-app.com/"},"Reporter App")," in your browser."]),p({key:"help"},["Just select all the files Reporter saved to your Dropbox. They are probably\nin a folder called ",n({key:"code"},"~/Dropbox/Apps/Reporter-App"),"."]),p({key:"server-info"},"Your data will not be uploaded to any server, it will only be\nstored and processed by the browser you are currently using."),p({key:"input",className:"upload-area"},[r({key:"loadFiles",gotData:this.props.gotData})])])}})},{"../reporter/loadFiles":12}]},{},[10]);